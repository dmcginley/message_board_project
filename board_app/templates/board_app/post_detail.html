{% extends 'board_app/base.html' %}
{% block title %}- {{ post.title }}{% endblock %}

{% block content %}
<main>
    <section class="section">
        <div class="post-container">
            <div>
                <h2 class="subtitle is-2">{{ post.title }}</h2>
            </div>
            <h4 class="subtitle is-4">{{ post.subtitle }}</h4>
            <p>{{ post.content }}</p>
            {% if object.author == user %}
            <div class="post-edit-container pt-5 pb-2">
                <a class="button is-small is-dark is-outlined mr-2" href="{% url 'edit_post' post.slug %}">Edit
                    post</a>
                <a class="button is-small is-danger is-outlined" href="{% url 'delete_post' post.slug %}">Delete
                    post</a>
            </div>
            {% endif %}
            <!-- <p> {{ post.content.html|safe }}</p> -->
            <div class="hr mt-5"></div>
            <div class="post-footer mt-2">
                <p>[Author] {{ post.author }}</p>
                <p>{{ post.date_posted|date:'d-M-Y g:ia' }}</p>
                {% for tag in post.tags.all %}
                <a class="has-text-weight-bold" href="{% url 'tag_post_page' tag.slug %}">
                    <p>#{{ tag.name }}</p>
                </a>
                {% endfor %}
            </div>
        </div>


        <!-- comment section -->
        <div class="comment-container mt-2">
            {% if not post.comments.all %}
            <p class="has-text-grey">No comments yet...</p>
            {% else %}
            <p class="has-text-grey">{{ post.comments.count }} comment{{ post.comments.count|pluralize }}</p>
            {% endif %}
            <a class="button is-success my-5" href="{% url 'add_comment' post.pk %}">Add a comment</a>

            {% if not post.comments.all %}
            {% else %}
            <h3 class="subtitle is-3">Latest Comments</h3>
            {% endif %}




            {% for comment in post.comments.all %}
            <div class="pb-5">
                <!-- <h4 class="subtitle is-4 mb-2">{{comment.title}}</h4> -->
                <p>{{ comment.content }}</p>
                <!-- <p> {{ post.content.html|safe }}</p> -->
                <div class="post-footer mt-2">
                    <p>[Author] {{ comment.author }}</p>
                    <p>{{ comment.date_posted|date:'d-M-Y g:ia' }}</p>
                </div>
            </div>
            {% endfor %}




        </div>
    </section>
</main>
<aside class="aside">
    <div class="desktop-searchbar">
        {% include 'board_app/components/searchbar.html' %}
    </div>

    <section class=aside-posts">
        {% sidebar_tag_cloud %}
    </section>
</aside>
{% endblock content %}
